{"ast":null,"code":"import _toConsumableArray from \"/Users/sairahulpadma/Desktop/leetcodeUI/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _inherits from \"/Users/sairahulpadma/Desktop/leetcodeUI/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/sairahulpadma/Desktop/leetcodeUI/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _createForOfIteratorHelper from \"/Users/sairahulpadma/Desktop/leetcodeUI/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";\nimport _createClass from \"/Users/sairahulpadma/Desktop/leetcodeUI/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _classCallCheck from \"/Users/sairahulpadma/Desktop/leetcodeUI/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport { Decoration, showPanel, EditorView, ViewPlugin, gutter, showTooltip, hoverTooltip, getPanel, logException, WidgetType, GutterMarker } from '@codemirror/view';\nimport { StateEffect, StateField, Facet, combineConfig, RangeSet } from '@codemirror/state';\nimport elt from 'crelt';\n\nvar SelectedDiagnostic = function SelectedDiagnostic(from, to, diagnostic) {\n  _classCallCheck(this, SelectedDiagnostic);\n\n  this.from = from;\n  this.to = to;\n  this.diagnostic = diagnostic;\n};\n\nvar LintState = /*#__PURE__*/function () {\n  function LintState(diagnostics, panel, selected) {\n    _classCallCheck(this, LintState);\n\n    this.diagnostics = diagnostics;\n    this.panel = panel;\n    this.selected = selected;\n  }\n\n  _createClass(LintState, null, [{\n    key: \"init\",\n    value: function init(diagnostics, panel, state) {\n      // Filter the list of diagnostics for which to create markers\n      var markedDiagnostics = diagnostics;\n      var diagnosticFilter = state.facet(lintConfig).markerFilter;\n      if (diagnosticFilter) markedDiagnostics = diagnosticFilter(markedDiagnostics, state);\n      var ranges = Decoration.set(markedDiagnostics.map(function (d) {\n        // For zero-length ranges or ranges covering only a line break, create a widget\n        return d.from == d.to || d.from == d.to - 1 && state.doc.lineAt(d.from).to == d.from ? Decoration.widget({\n          widget: new DiagnosticWidget(d),\n          diagnostic: d\n        }).range(d.from) : Decoration.mark({\n          attributes: {\n            class: \"cm-lintRange cm-lintRange-\" + d.severity + (d.markClass ? \" \" + d.markClass : \"\")\n          },\n          diagnostic: d\n        }).range(d.from, d.to);\n      }), true);\n      return new LintState(ranges, panel, findDiagnostic(ranges));\n    }\n  }]);\n\n  return LintState;\n}();\n\nfunction findDiagnostic(diagnostics) {\n  var diagnostic = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  var after = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  var found = null;\n  diagnostics.between(after, 1e9, function (from, to, _ref) {\n    var spec = _ref.spec;\n    if (diagnostic && spec.diagnostic != diagnostic) return;\n    found = new SelectedDiagnostic(from, to, spec.diagnostic);\n    return false;\n  });\n  return found;\n}\n\nfunction hideTooltip(tr, tooltip) {\n  var from = tooltip.pos,\n      to = tooltip.end || from;\n  var result = tr.state.facet(lintConfig).hideOn(tr, from, to);\n  if (result != null) return result;\n  var line = tr.startState.doc.lineAt(tooltip.pos);\n  return !!(tr.effects.some(function (e) {\n    return e.is(setDiagnosticsEffect);\n  }) || tr.changes.touchesRange(line.from, Math.max(line.to, to)));\n}\n\nfunction maybeEnableLint(state, effects) {\n  return state.field(lintState, false) ? effects : effects.concat(StateEffect.appendConfig.of(lintExtensions));\n}\n/**\nReturns a transaction spec which updates the current set of\ndiagnostics, and enables the lint extension if if wasn't already\nactive.\n*/\n\n\nfunction setDiagnostics(state, diagnostics) {\n  return {\n    effects: maybeEnableLint(state, [setDiagnosticsEffect.of(diagnostics)])\n  };\n}\n/**\nThe state effect that updates the set of active diagnostics. Can\nbe useful when writing an extension that needs to track these.\n*/\n\n\nvar setDiagnosticsEffect = /*@__PURE__*/StateEffect.define();\nvar togglePanel = /*@__PURE__*/StateEffect.define();\nvar movePanelSelection = /*@__PURE__*/StateEffect.define();\nvar lintState = /*@__PURE__*/StateField.define({\n  create: function create() {\n    return new LintState(Decoration.none, null, null);\n  },\n  update: function update(value, tr) {\n    if (tr.docChanged && value.diagnostics.size) {\n      var mapped = value.diagnostics.map(tr.changes),\n          selected = null,\n          panel = value.panel;\n\n      if (value.selected) {\n        var selPos = tr.changes.mapPos(value.selected.from, 1);\n        selected = findDiagnostic(mapped, value.selected.diagnostic, selPos) || findDiagnostic(mapped, null, selPos);\n      }\n\n      if (!mapped.size && panel && tr.state.facet(lintConfig).autoPanel) panel = null;\n      value = new LintState(mapped, panel, selected);\n    }\n\n    var _iterator = _createForOfIteratorHelper(tr.effects),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var effect = _step.value;\n\n        if (effect.is(setDiagnosticsEffect)) {\n          var _panel = !tr.state.facet(lintConfig).autoPanel ? value.panel : effect.value.length ? LintPanel.open : null;\n\n          value = LintState.init(effect.value, _panel, tr.state);\n        } else if (effect.is(togglePanel)) {\n          value = new LintState(value.diagnostics, effect.value ? LintPanel.open : null, value.selected);\n        } else if (effect.is(movePanelSelection)) {\n          value = new LintState(value.diagnostics, value.panel, effect.value);\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    return value;\n  },\n  provide: function provide(f) {\n    return [showPanel.from(f, function (val) {\n      return val.panel;\n    }), EditorView.decorations.from(f, function (s) {\n      return s.diagnostics;\n    })];\n  }\n});\n/**\nReturns the number of active lint diagnostics in the given state.\n*/\n\nfunction diagnosticCount(state) {\n  var lint = state.field(lintState, false);\n  return lint ? lint.diagnostics.size : 0;\n}\n\nvar activeMark = /*@__PURE__*/Decoration.mark({\n  class: \"cm-lintRange cm-lintRange-active\"\n});\n\nfunction lintTooltip(view, pos, side) {\n  var _view$state$field = view.state.field(lintState),\n      diagnostics = _view$state$field.diagnostics;\n\n  var found = [],\n      stackStart = 2e8,\n      stackEnd = 0;\n  diagnostics.between(pos - (side < 0 ? 1 : 0), pos + (side > 0 ? 1 : 0), function (from, to, _ref2) {\n    var spec = _ref2.spec;\n\n    if (pos >= from && pos <= to && (from == to || (pos > from || side > 0) && (pos < to || side < 0))) {\n      found.push(spec.diagnostic);\n      stackStart = Math.min(from, stackStart);\n      stackEnd = Math.max(to, stackEnd);\n    }\n  });\n  var diagnosticFilter = view.state.facet(lintConfig).tooltipFilter;\n  if (diagnosticFilter) found = diagnosticFilter(found, view.state);\n  if (!found.length) return null;\n  return {\n    pos: stackStart,\n    end: stackEnd,\n    above: view.state.doc.lineAt(stackStart).to < stackEnd,\n    create: function create() {\n      return {\n        dom: diagnosticsTooltip(view, found)\n      };\n    }\n  };\n}\n\nfunction diagnosticsTooltip(view, diagnostics) {\n  return elt(\"ul\", {\n    class: \"cm-tooltip-lint\"\n  }, diagnostics.map(function (d) {\n    return renderDiagnostic(view, d, false);\n  }));\n}\n/**\nCommand to open and focus the lint panel.\n*/\n\n\nvar openLintPanel = function openLintPanel(view) {\n  var field = view.state.field(lintState, false);\n  if (!field || !field.panel) view.dispatch({\n    effects: maybeEnableLint(view.state, [togglePanel.of(true)])\n  });\n  var panel = getPanel(view, LintPanel.open);\n  if (panel) panel.dom.querySelector(\".cm-panel-lint ul\").focus();\n  return true;\n};\n/**\nCommand to close the lint panel, when open.\n*/\n\n\nvar closeLintPanel = function closeLintPanel(view) {\n  var field = view.state.field(lintState, false);\n  if (!field || !field.panel) return false;\n  view.dispatch({\n    effects: togglePanel.of(false)\n  });\n  return true;\n};\n/**\nMove the selection to the next diagnostic.\n*/\n\n\nvar nextDiagnostic = function nextDiagnostic(view) {\n  var field = view.state.field(lintState, false);\n  if (!field) return false;\n  var sel = view.state.selection.main,\n      next = field.diagnostics.iter(sel.to + 1);\n\n  if (!next.value) {\n    next = field.diagnostics.iter(0);\n    if (!next.value || next.from == sel.from && next.to == sel.to) return false;\n  }\n\n  view.dispatch({\n    selection: {\n      anchor: next.from,\n      head: next.to\n    },\n    scrollIntoView: true\n  });\n  return true;\n};\n/**\nMove the selection to the previous diagnostic.\n*/\n\n\nvar previousDiagnostic = function previousDiagnostic(view) {\n  var state = view.state,\n      field = state.field(lintState, false);\n  if (!field) return false;\n  var sel = state.selection.main;\n  var prevFrom, prevTo, lastFrom, lastTo;\n  field.diagnostics.between(0, state.doc.length, function (from, to) {\n    if (to < sel.to && (prevFrom == null || prevFrom < from)) {\n      prevFrom = from;\n      prevTo = to;\n    }\n\n    if (lastFrom == null || from > lastFrom) {\n      lastFrom = from;\n      lastTo = to;\n    }\n  });\n  if (lastFrom == null || prevFrom == null && lastFrom == sel.from) return false;\n  view.dispatch({\n    selection: {\n      anchor: prevFrom !== null && prevFrom !== void 0 ? prevFrom : lastFrom,\n      head: prevTo !== null && prevTo !== void 0 ? prevTo : lastTo\n    },\n    scrollIntoView: true\n  });\n  return true;\n};\n/**\nA set of default key bindings for the lint functionality.\n\n- Ctrl-Shift-m (Cmd-Shift-m on macOS): [`openLintPanel`](https://codemirror.net/6/docs/ref/#lint.openLintPanel)\n- F8: [`nextDiagnostic`](https://codemirror.net/6/docs/ref/#lint.nextDiagnostic)\n*/\n\n\nvar lintKeymap = [{\n  key: \"Mod-Shift-m\",\n  run: openLintPanel,\n  preventDefault: true\n}, {\n  key: \"F8\",\n  run: nextDiagnostic\n}];\nvar lintPlugin = /*@__PURE__*/ViewPlugin.fromClass( /*#__PURE__*/function () {\n  function _class(view) {\n    _classCallCheck(this, _class);\n\n    this.view = view;\n    this.timeout = -1;\n    this.set = true;\n\n    var _view$state$facet = view.state.facet(lintConfig),\n        delay = _view$state$facet.delay;\n\n    this.lintTime = Date.now() + delay;\n    this.run = this.run.bind(this);\n    this.timeout = setTimeout(this.run, delay);\n  }\n\n  _createClass(_class, [{\n    key: \"run\",\n    value: function run() {\n      var _this = this;\n\n      clearTimeout(this.timeout);\n      var now = Date.now();\n\n      if (now < this.lintTime - 10) {\n        this.timeout = setTimeout(this.run, this.lintTime - now);\n      } else {\n        this.set = false;\n\n        var state = this.view.state,\n            _state$facet = state.facet(lintConfig),\n            sources = _state$facet.sources;\n\n        if (sources.length) batchResults(sources.map(function (s) {\n          return Promise.resolve(s(_this.view));\n        }), function (annotations) {\n          if (_this.view.state.doc == state.doc) _this.view.dispatch(setDiagnostics(_this.view.state, annotations.reduce(function (a, b) {\n            return a.concat(b);\n          })));\n        }, function (error) {\n          logException(_this.view.state, error);\n        });\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update(_update) {\n      var config = _update.state.facet(lintConfig);\n\n      if (_update.docChanged || config != _update.startState.facet(lintConfig) || config.needsRefresh && config.needsRefresh(_update)) {\n        this.lintTime = Date.now() + config.delay;\n\n        if (!this.set) {\n          this.set = true;\n          this.timeout = setTimeout(this.run, config.delay);\n        }\n      }\n    }\n  }, {\n    key: \"force\",\n    value: function force() {\n      if (this.set) {\n        this.lintTime = Date.now();\n        this.run();\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      clearTimeout(this.timeout);\n    }\n  }]);\n\n  return _class;\n}());\n\nfunction batchResults(promises, sink, error) {\n  var collected = [],\n      timeout = -1;\n\n  var _iterator2 = _createForOfIteratorHelper(promises),\n      _step2;\n\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var p = _step2.value;\n      p.then(function (value) {\n        collected.push(value);\n        clearTimeout(timeout);\n        if (collected.length == promises.length) sink(collected);else setTimeout(function () {\n          return sink(collected);\n        }, 200);\n      }, error);\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n}\n\nvar lintConfig = /*@__PURE__*/Facet.define({\n  combine: function combine(input) {\n    return Object.assign({\n      sources: input.map(function (i) {\n        return i.source;\n      }).filter(function (x) {\n        return x != null;\n      })\n    }, combineConfig(input.map(function (i) {\n      return i.config;\n    }), {\n      delay: 750,\n      markerFilter: null,\n      tooltipFilter: null,\n      needsRefresh: null,\n      hideOn: function hideOn() {\n        return null;\n      }\n    }, {\n      needsRefresh: function needsRefresh(a, b) {\n        return !a ? b : !b ? a : function (u) {\n          return a(u) || b(u);\n        };\n      }\n    }));\n  }\n});\n/**\nGiven a diagnostic source, this function returns an extension that\nenables linting with that source. It will be called whenever the\neditor is idle (after its content changed). If `null` is given as\nsource, this only configures the lint extension.\n*/\n\nfunction linter(source) {\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return [lintConfig.of({\n    source: source,\n    config: config\n  }), lintPlugin, lintExtensions];\n}\n/**\nForces any linters [configured](https://codemirror.net/6/docs/ref/#lint.linter) to run when the\neditor is idle to run right away.\n*/\n\n\nfunction forceLinting(view) {\n  var plugin = view.plugin(lintPlugin);\n  if (plugin) plugin.force();\n}\n\nfunction assignKeys(actions) {\n  var assigned = [];\n\n  if (actions) {\n    var _iterator3 = _createForOfIteratorHelper(actions),\n        _step3;\n\n    try {\n      actions: for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n        var name = _step3.value.name;\n\n        var _loop = function _loop(i) {\n          var ch = name[i];\n\n          if (/[a-zA-Z]/.test(ch) && !assigned.some(function (c) {\n            return c.toLowerCase() == ch.toLowerCase();\n          })) {\n            assigned.push(ch);\n            return \"continue|actions\";\n          }\n        };\n\n        for (var i = 0; i < name.length; i++) {\n          var _ret = _loop(i);\n\n          if (_ret === \"continue|actions\") continue actions;\n        }\n\n        assigned.push(\"\");\n      }\n    } catch (err) {\n      _iterator3.e(err);\n    } finally {\n      _iterator3.f();\n    }\n  }\n\n  return assigned;\n}\n\nfunction renderDiagnostic(view, diagnostic, inPanel) {\n  var _a;\n\n  var keys = inPanel ? assignKeys(diagnostic.actions) : [];\n  return elt(\"li\", {\n    class: \"cm-diagnostic cm-diagnostic-\" + diagnostic.severity\n  }, elt(\"span\", {\n    class: \"cm-diagnosticText\"\n  }, diagnostic.renderMessage ? diagnostic.renderMessage(view) : diagnostic.message), (_a = diagnostic.actions) === null || _a === void 0 ? void 0 : _a.map(function (action, i) {\n    var fired = false,\n        click = function click(e) {\n      e.preventDefault();\n      if (fired) return;\n      fired = true;\n      var found = findDiagnostic(view.state.field(lintState).diagnostics, diagnostic);\n      if (found) action.apply(view, found.from, found.to);\n    };\n\n    var name = action.name,\n        keyIndex = keys[i] ? name.indexOf(keys[i]) : -1;\n    var nameElt = keyIndex < 0 ? name : [name.slice(0, keyIndex), elt(\"u\", name.slice(keyIndex, keyIndex + 1)), name.slice(keyIndex + 1)];\n    return elt(\"button\", {\n      type: \"button\",\n      class: \"cm-diagnosticAction\",\n      onclick: click,\n      onmousedown: click,\n      \"aria-label\": \" Action: \".concat(name).concat(keyIndex < 0 ? \"\" : \" (access key \\\"\".concat(keys[i], \")\\\"\"), \".\")\n    }, nameElt);\n  }), diagnostic.source && elt(\"div\", {\n    class: \"cm-diagnosticSource\"\n  }, diagnostic.source));\n}\n\nvar DiagnosticWidget = /*#__PURE__*/function (_WidgetType) {\n  _inherits(DiagnosticWidget, _WidgetType);\n\n  var _super = _createSuper(DiagnosticWidget);\n\n  function DiagnosticWidget(diagnostic) {\n    var _this2;\n\n    _classCallCheck(this, DiagnosticWidget);\n\n    _this2 = _super.call(this);\n    _this2.diagnostic = diagnostic;\n    return _this2;\n  }\n\n  _createClass(DiagnosticWidget, [{\n    key: \"eq\",\n    value: function eq(other) {\n      return other.diagnostic == this.diagnostic;\n    }\n  }, {\n    key: \"toDOM\",\n    value: function toDOM() {\n      return elt(\"span\", {\n        class: \"cm-lintPoint cm-lintPoint-\" + this.diagnostic.severity\n      });\n    }\n  }]);\n\n  return DiagnosticWidget;\n}(WidgetType);\n\nvar PanelItem = function PanelItem(view, diagnostic) {\n  _classCallCheck(this, PanelItem);\n\n  this.diagnostic = diagnostic;\n  this.id = \"item_\" + Math.floor(Math.random() * 0xffffffff).toString(16);\n  this.dom = renderDiagnostic(view, diagnostic, true);\n  this.dom.id = this.id;\n  this.dom.setAttribute(\"role\", \"option\");\n};\n\nvar LintPanel = /*#__PURE__*/function () {\n  function LintPanel(view) {\n    var _this3 = this;\n\n    _classCallCheck(this, LintPanel);\n\n    this.view = view;\n    this.items = [];\n\n    var onkeydown = function onkeydown(event) {\n      if (event.keyCode == 27) {\n        // Escape\n        closeLintPanel(_this3.view);\n\n        _this3.view.focus();\n      } else if (event.keyCode == 38 || event.keyCode == 33) {\n        // ArrowUp, PageUp\n        _this3.moveSelection((_this3.selectedIndex - 1 + _this3.items.length) % _this3.items.length);\n      } else if (event.keyCode == 40 || event.keyCode == 34) {\n        // ArrowDown, PageDown\n        _this3.moveSelection((_this3.selectedIndex + 1) % _this3.items.length);\n      } else if (event.keyCode == 36) {\n        // Home\n        _this3.moveSelection(0);\n      } else if (event.keyCode == 35) {\n        // End\n        _this3.moveSelection(_this3.items.length - 1);\n      } else if (event.keyCode == 13) {\n        // Enter\n        _this3.view.focus();\n      } else if (event.keyCode >= 65 && event.keyCode <= 90 && _this3.selectedIndex >= 0) {\n        // A-Z\n        var diagnostic = _this3.items[_this3.selectedIndex].diagnostic,\n            keys = assignKeys(diagnostic.actions);\n\n        for (var i = 0; i < keys.length; i++) {\n          if (keys[i].toUpperCase().charCodeAt(0) == event.keyCode) {\n            var found = findDiagnostic(_this3.view.state.field(lintState).diagnostics, diagnostic);\n            if (found) diagnostic.actions[i].apply(view, found.from, found.to);\n          }\n        }\n      } else {\n        return;\n      }\n\n      event.preventDefault();\n    };\n\n    var onclick = function onclick(event) {\n      for (var i = 0; i < _this3.items.length; i++) {\n        if (_this3.items[i].dom.contains(event.target)) _this3.moveSelection(i);\n      }\n    };\n\n    this.list = elt(\"ul\", {\n      tabIndex: 0,\n      role: \"listbox\",\n      \"aria-label\": this.view.state.phrase(\"Diagnostics\"),\n      onkeydown: onkeydown,\n      onclick: onclick\n    });\n    this.dom = elt(\"div\", {\n      class: \"cm-panel-lint\"\n    }, this.list, elt(\"button\", {\n      type: \"button\",\n      name: \"close\",\n      \"aria-label\": this.view.state.phrase(\"close\"),\n      onclick: function onclick() {\n        return closeLintPanel(_this3.view);\n      }\n    }, \"×\"));\n    this.update();\n  }\n\n  _createClass(LintPanel, [{\n    key: \"selectedIndex\",\n    get: function get() {\n      var selected = this.view.state.field(lintState).selected;\n      if (!selected) return -1;\n\n      for (var i = 0; i < this.items.length; i++) {\n        if (this.items[i].diagnostic == selected.diagnostic) return i;\n      }\n\n      return -1;\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var _this4 = this;\n\n      var _this$view$state$fiel = this.view.state.field(lintState),\n          diagnostics = _this$view$state$fiel.diagnostics,\n          selected = _this$view$state$fiel.selected;\n\n      var i = 0,\n          needsSync = false,\n          newSelectedItem = null;\n      diagnostics.between(0, this.view.state.doc.length, function (_start, _end, _ref3) {\n        var spec = _ref3.spec;\n        var found = -1,\n            item;\n\n        for (var j = i; j < _this4.items.length; j++) {\n          if (_this4.items[j].diagnostic == spec.diagnostic) {\n            found = j;\n            break;\n          }\n        }\n\n        if (found < 0) {\n          item = new PanelItem(_this4.view, spec.diagnostic);\n\n          _this4.items.splice(i, 0, item);\n\n          needsSync = true;\n        } else {\n          item = _this4.items[found];\n\n          if (found > i) {\n            _this4.items.splice(i, found - i);\n\n            needsSync = true;\n          }\n        }\n\n        if (selected && item.diagnostic == selected.diagnostic) {\n          if (!item.dom.hasAttribute(\"aria-selected\")) {\n            item.dom.setAttribute(\"aria-selected\", \"true\");\n            newSelectedItem = item;\n          }\n        } else if (item.dom.hasAttribute(\"aria-selected\")) {\n          item.dom.removeAttribute(\"aria-selected\");\n        }\n\n        i++;\n      });\n\n      while (i < this.items.length && !(this.items.length == 1 && this.items[0].diagnostic.from < 0)) {\n        needsSync = true;\n        this.items.pop();\n      }\n\n      if (this.items.length == 0) {\n        this.items.push(new PanelItem(this.view, {\n          from: -1,\n          to: -1,\n          severity: \"info\",\n          message: this.view.state.phrase(\"No diagnostics\")\n        }));\n        needsSync = true;\n      }\n\n      if (newSelectedItem) {\n        this.list.setAttribute(\"aria-activedescendant\", newSelectedItem.id);\n        this.view.requestMeasure({\n          key: this,\n          read: function read() {\n            return {\n              sel: newSelectedItem.dom.getBoundingClientRect(),\n              panel: _this4.list.getBoundingClientRect()\n            };\n          },\n          write: function write(_ref4) {\n            var sel = _ref4.sel,\n                panel = _ref4.panel;\n            var scaleY = panel.height / _this4.list.offsetHeight;\n            if (sel.top < panel.top) _this4.list.scrollTop -= (panel.top - sel.top) / scaleY;else if (sel.bottom > panel.bottom) _this4.list.scrollTop += (sel.bottom - panel.bottom) / scaleY;\n          }\n        });\n      } else if (this.selectedIndex < 0) {\n        this.list.removeAttribute(\"aria-activedescendant\");\n      }\n\n      if (needsSync) this.sync();\n    }\n  }, {\n    key: \"sync\",\n    value: function sync() {\n      var domPos = this.list.firstChild;\n\n      function rm() {\n        var prev = domPos;\n        domPos = prev.nextSibling;\n        prev.remove();\n      }\n\n      var _iterator4 = _createForOfIteratorHelper(this.items),\n          _step4;\n\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var item = _step4.value;\n\n          if (item.dom.parentNode == this.list) {\n            while (domPos != item.dom) {\n              rm();\n            }\n\n            domPos = item.dom.nextSibling;\n          } else {\n            this.list.insertBefore(item.dom, domPos);\n          }\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n\n      while (domPos) {\n        rm();\n      }\n    }\n  }, {\n    key: \"moveSelection\",\n    value: function moveSelection(selectedIndex) {\n      if (this.selectedIndex < 0) return;\n      var field = this.view.state.field(lintState);\n      var selection = findDiagnostic(field.diagnostics, this.items[selectedIndex].diagnostic);\n      if (!selection) return;\n      this.view.dispatch({\n        selection: {\n          anchor: selection.from,\n          head: selection.to\n        },\n        scrollIntoView: true,\n        effects: movePanelSelection.of(selection)\n      });\n    }\n  }], [{\n    key: \"open\",\n    value: function open(view) {\n      return new LintPanel(view);\n    }\n  }]);\n\n  return LintPanel;\n}();\n\nfunction svg(content) {\n  var attrs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"viewBox=\\\"0 0 40 40\\\"\";\n  return \"url('data:image/svg+xml,<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" \".concat(attrs, \">\").concat(encodeURIComponent(content), \"</svg>')\");\n}\n\nfunction underline(color) {\n  return svg(\"<path d=\\\"m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0\\\" stroke=\\\"\".concat(color, \"\\\" fill=\\\"none\\\" stroke-width=\\\".7\\\"/>\"), \"width=\\\"6\\\" height=\\\"3\\\"\");\n}\n\nvar baseTheme = /*@__PURE__*/EditorView.baseTheme({\n  \".cm-diagnostic\": {\n    padding: \"3px 6px 3px 8px\",\n    marginLeft: \"-1px\",\n    display: \"block\",\n    whiteSpace: \"pre-wrap\"\n  },\n  \".cm-diagnostic-error\": {\n    borderLeft: \"5px solid #d11\"\n  },\n  \".cm-diagnostic-warning\": {\n    borderLeft: \"5px solid orange\"\n  },\n  \".cm-diagnostic-info\": {\n    borderLeft: \"5px solid #999\"\n  },\n  \".cm-diagnostic-hint\": {\n    borderLeft: \"5px solid #66d\"\n  },\n  \".cm-diagnosticAction\": {\n    font: \"inherit\",\n    border: \"none\",\n    padding: \"2px 4px\",\n    backgroundColor: \"#444\",\n    color: \"white\",\n    borderRadius: \"3px\",\n    marginLeft: \"8px\",\n    cursor: \"pointer\"\n  },\n  \".cm-diagnosticSource\": {\n    fontSize: \"70%\",\n    opacity: .7\n  },\n  \".cm-lintRange\": {\n    backgroundPosition: \"left bottom\",\n    backgroundRepeat: \"repeat-x\",\n    paddingBottom: \"0.7px\"\n  },\n  \".cm-lintRange-error\": {\n    backgroundImage: /*@__PURE__*/underline(\"#d11\")\n  },\n  \".cm-lintRange-warning\": {\n    backgroundImage: /*@__PURE__*/underline(\"orange\")\n  },\n  \".cm-lintRange-info\": {\n    backgroundImage: /*@__PURE__*/underline(\"#999\")\n  },\n  \".cm-lintRange-hint\": {\n    backgroundImage: /*@__PURE__*/underline(\"#66d\")\n  },\n  \".cm-lintRange-active\": {\n    backgroundColor: \"#ffdd9980\"\n  },\n  \".cm-tooltip-lint\": {\n    padding: 0,\n    margin: 0\n  },\n  \".cm-lintPoint\": {\n    position: \"relative\",\n    \"&:after\": {\n      content: '\"\"',\n      position: \"absolute\",\n      bottom: 0,\n      left: \"-2px\",\n      borderLeft: \"3px solid transparent\",\n      borderRight: \"3px solid transparent\",\n      borderBottom: \"4px solid #d11\"\n    }\n  },\n  \".cm-lintPoint-warning\": {\n    \"&:after\": {\n      borderBottomColor: \"orange\"\n    }\n  },\n  \".cm-lintPoint-info\": {\n    \"&:after\": {\n      borderBottomColor: \"#999\"\n    }\n  },\n  \".cm-lintPoint-hint\": {\n    \"&:after\": {\n      borderBottomColor: \"#66d\"\n    }\n  },\n  \".cm-panel.cm-panel-lint\": {\n    position: \"relative\",\n    \"& ul\": {\n      maxHeight: \"100px\",\n      overflowY: \"auto\",\n      \"& [aria-selected]\": {\n        backgroundColor: \"#ddd\",\n        \"& u\": {\n          textDecoration: \"underline\"\n        }\n      },\n      \"&:focus [aria-selected]\": {\n        background_fallback: \"#bdf\",\n        backgroundColor: \"Highlight\",\n        color_fallback: \"white\",\n        color: \"HighlightText\"\n      },\n      \"& u\": {\n        textDecoration: \"none\"\n      },\n      padding: 0,\n      margin: 0\n    },\n    \"& [name=close]\": {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"2px\",\n      background: \"inherit\",\n      border: \"none\",\n      font: \"inherit\",\n      padding: 0,\n      margin: 0\n    }\n  }\n});\n\nfunction severityWeight(sev) {\n  return sev == \"error\" ? 4 : sev == \"warning\" ? 3 : sev == \"info\" ? 2 : 1;\n}\n\nvar LintGutterMarker = /*#__PURE__*/function (_GutterMarker) {\n  _inherits(LintGutterMarker, _GutterMarker);\n\n  var _super2 = _createSuper(LintGutterMarker);\n\n  function LintGutterMarker(diagnostics) {\n    var _this5;\n\n    _classCallCheck(this, LintGutterMarker);\n\n    _this5 = _super2.call(this);\n    _this5.diagnostics = diagnostics;\n    _this5.severity = diagnostics.reduce(function (max, d) {\n      return severityWeight(max) < severityWeight(d.severity) ? d.severity : max;\n    }, \"hint\");\n    return _this5;\n  }\n\n  _createClass(LintGutterMarker, [{\n    key: \"toDOM\",\n    value: function toDOM(view) {\n      var elt = document.createElement(\"div\");\n      elt.className = \"cm-lint-marker cm-lint-marker-\" + this.severity;\n      var diagnostics = this.diagnostics;\n      var diagnosticsFilter = view.state.facet(lintGutterConfig).tooltipFilter;\n      if (diagnosticsFilter) diagnostics = diagnosticsFilter(diagnostics, view.state);\n      if (diagnostics.length) elt.onmouseover = function () {\n        return gutterMarkerMouseOver(view, elt, diagnostics);\n      };\n      return elt;\n    }\n  }]);\n\n  return LintGutterMarker;\n}(GutterMarker);\n\nfunction trackHoverOn(view, marker) {\n  var mousemove = function mousemove(event) {\n    var rect = marker.getBoundingClientRect();\n    if (event.clientX > rect.left - 10\n    /* Hover.Margin */\n    && event.clientX < rect.right + 10\n    /* Hover.Margin */\n    && event.clientY > rect.top - 10\n    /* Hover.Margin */\n    && event.clientY < rect.bottom + 10\n    /* Hover.Margin */\n    ) return;\n\n    for (var target = event.target; target; target = target.parentNode) {\n      if (target.nodeType == 1 && target.classList.contains(\"cm-tooltip-lint\")) return;\n    }\n\n    window.removeEventListener(\"mousemove\", mousemove);\n    if (view.state.field(lintGutterTooltip)) view.dispatch({\n      effects: setLintGutterTooltip.of(null)\n    });\n  };\n\n  window.addEventListener(\"mousemove\", mousemove);\n}\n\nfunction gutterMarkerMouseOver(view, marker, diagnostics) {\n  function hovered() {\n    var line = view.elementAtHeight(marker.getBoundingClientRect().top + 5 - view.documentTop);\n    var linePos = view.coordsAtPos(line.from);\n\n    if (linePos) {\n      view.dispatch({\n        effects: setLintGutterTooltip.of({\n          pos: line.from,\n          above: false,\n          create: function create() {\n            return {\n              dom: diagnosticsTooltip(view, diagnostics),\n              getCoords: function getCoords() {\n                return marker.getBoundingClientRect();\n              }\n            };\n          }\n        })\n      });\n    }\n\n    marker.onmouseout = marker.onmousemove = null;\n    trackHoverOn(view, marker);\n  }\n\n  var _view$state$facet2 = view.state.facet(lintGutterConfig),\n      hoverTime = _view$state$facet2.hoverTime;\n\n  var hoverTimeout = setTimeout(hovered, hoverTime);\n\n  marker.onmouseout = function () {\n    clearTimeout(hoverTimeout);\n    marker.onmouseout = marker.onmousemove = null;\n  };\n\n  marker.onmousemove = function () {\n    clearTimeout(hoverTimeout);\n    hoverTimeout = setTimeout(hovered, hoverTime);\n  };\n}\n\nfunction markersForDiagnostics(doc, diagnostics) {\n  var byLine = Object.create(null);\n\n  var _iterator5 = _createForOfIteratorHelper(diagnostics),\n      _step5;\n\n  try {\n    for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n      var diagnostic = _step5.value;\n\n      var _line = doc.lineAt(diagnostic.from);\n\n      (byLine[_line.from] || (byLine[_line.from] = [])).push(diagnostic);\n    }\n  } catch (err) {\n    _iterator5.e(err);\n  } finally {\n    _iterator5.f();\n  }\n\n  var markers = [];\n\n  for (var line in byLine) {\n    markers.push(new LintGutterMarker(byLine[line]).range(+line));\n  }\n\n  return RangeSet.of(markers, true);\n}\n\nvar lintGutterExtension = /*@__PURE__*/gutter({\n  class: \"cm-gutter-lint\",\n  markers: function markers(view) {\n    return view.state.field(lintGutterMarkers);\n  },\n  widgetMarker: function widgetMarker(view, widget, block) {\n    var diagnostics = [];\n    view.state.field(lintGutterMarkers).between(block.from, block.to, function (from, to, value) {\n      diagnostics.push.apply(diagnostics, _toConsumableArray(value.diagnostics));\n    });\n    return diagnostics.length ? new LintGutterMarker(diagnostics) : null;\n  }\n});\nvar lintGutterMarkers = /*@__PURE__*/StateField.define({\n  create: function create() {\n    return RangeSet.empty;\n  },\n  update: function update(markers, tr) {\n    markers = markers.map(tr.changes);\n    var diagnosticFilter = tr.state.facet(lintGutterConfig).markerFilter;\n\n    var _iterator6 = _createForOfIteratorHelper(tr.effects),\n        _step6;\n\n    try {\n      for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n        var effect = _step6.value;\n\n        if (effect.is(setDiagnosticsEffect)) {\n          var diagnostics = effect.value;\n          if (diagnosticFilter) diagnostics = diagnosticFilter(diagnostics || [], tr.state);\n          markers = markersForDiagnostics(tr.state.doc, diagnostics.slice(0));\n        }\n      }\n    } catch (err) {\n      _iterator6.e(err);\n    } finally {\n      _iterator6.f();\n    }\n\n    return markers;\n  }\n});\nvar setLintGutterTooltip = /*@__PURE__*/StateEffect.define();\nvar lintGutterTooltip = /*@__PURE__*/StateField.define({\n  create: function create() {\n    return null;\n  },\n  update: function update(tooltip, tr) {\n    if (tooltip && tr.docChanged) tooltip = hideTooltip(tr, tooltip) ? null : Object.assign(Object.assign({}, tooltip), {\n      pos: tr.changes.mapPos(tooltip.pos)\n    });\n    return tr.effects.reduce(function (t, e) {\n      return e.is(setLintGutterTooltip) ? e.value : t;\n    }, tooltip);\n  },\n  provide: function provide(field) {\n    return showTooltip.from(field);\n  }\n});\nvar lintGutterTheme = /*@__PURE__*/EditorView.baseTheme({\n  \".cm-gutter-lint\": {\n    width: \"1.4em\",\n    \"& .cm-gutterElement\": {\n      padding: \".2em\"\n    }\n  },\n  \".cm-lint-marker\": {\n    width: \"1em\",\n    height: \"1em\"\n  },\n  \".cm-lint-marker-info\": {\n    content: /*@__PURE__*/svg(\"<path fill=\\\"#aaf\\\" stroke=\\\"#77e\\\" stroke-width=\\\"6\\\" stroke-linejoin=\\\"round\\\" d=\\\"M5 5L35 5L35 35L5 35Z\\\"/>\")\n  },\n  \".cm-lint-marker-warning\": {\n    content: /*@__PURE__*/svg(\"<path fill=\\\"#fe8\\\" stroke=\\\"#fd7\\\" stroke-width=\\\"6\\\" stroke-linejoin=\\\"round\\\" d=\\\"M20 6L37 35L3 35Z\\\"/>\")\n  },\n  \".cm-lint-marker-error\": {\n    content: /*@__PURE__*/svg(\"<circle cx=\\\"20\\\" cy=\\\"20\\\" r=\\\"15\\\" fill=\\\"#f87\\\" stroke=\\\"#f43\\\" stroke-width=\\\"6\\\"/>\")\n  }\n});\nvar lintExtensions = [lintState, /*@__PURE__*/EditorView.decorations.compute([lintState], function (state) {\n  var _state$field = state.field(lintState),\n      selected = _state$field.selected,\n      panel = _state$field.panel;\n\n  return !selected || !panel || selected.from == selected.to ? Decoration.none : Decoration.set([activeMark.range(selected.from, selected.to)]);\n}), /*@__PURE__*/hoverTooltip(lintTooltip, {\n  hideOn: hideTooltip\n}), baseTheme];\nvar lintGutterConfig = /*@__PURE__*/Facet.define({\n  combine: function combine(configs) {\n    return combineConfig(configs, {\n      hoverTime: 300\n      /* Hover.Time */\n      ,\n      markerFilter: null,\n      tooltipFilter: null\n    });\n  }\n});\n/**\nReturns an extension that installs a gutter showing markers for\neach line that has diagnostics, which can be hovered over to see\nthe diagnostics.\n*/\n\nfunction lintGutter() {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return [lintGutterConfig.of(config), lintGutterMarkers, lintGutterExtension, lintGutterTheme, lintGutterTooltip];\n}\n/**\nIterate over the marked diagnostics for the given editor state,\ncalling `f` for each of them. Note that, if the document changed\nsince the diagnostics were created, the `Diagnostic` object will\nhold the original outdated position, whereas the `to` and `from`\narguments hold the diagnostic's current position.\n*/\n\n\nfunction forEachDiagnostic(state, f) {\n  var lState = state.field(lintState, false);\n  if (lState && lState.diagnostics.size) for (var iter = RangeSet.iter([lState.diagnostics]); iter.value; iter.next()) {\n    f(iter.value.spec.diagnostic, iter.from, iter.to);\n  }\n}\n\nexport { closeLintPanel, diagnosticCount, forEachDiagnostic, forceLinting, lintGutter, lintKeymap, linter, nextDiagnostic, openLintPanel, previousDiagnostic, setDiagnostics, setDiagnosticsEffect };","map":{"version":3,"sources":["/Users/sairahulpadma/Desktop/leetcodeUI/frontend/node_modules/@codemirror/lint/dist/index.js"],"names":["Decoration","showPanel","EditorView","ViewPlugin","gutter","showTooltip","hoverTooltip","getPanel","logException","WidgetType","GutterMarker","StateEffect","StateField","Facet","combineConfig","RangeSet","elt","SelectedDiagnostic","from","to","diagnostic","LintState","diagnostics","panel","selected","state","markedDiagnostics","diagnosticFilter","facet","lintConfig","markerFilter","ranges","set","map","d","doc","lineAt","widget","DiagnosticWidget","range","mark","attributes","class","severity","markClass","findDiagnostic","after","found","between","spec","hideTooltip","tr","tooltip","pos","end","result","hideOn","line","startState","effects","some","e","is","setDiagnosticsEffect","changes","touchesRange","Math","max","maybeEnableLint","field","lintState","concat","appendConfig","of","lintExtensions","setDiagnostics","define","togglePanel","movePanelSelection","create","none","update","value","docChanged","size","mapped","selPos","mapPos","autoPanel","effect","length","LintPanel","open","init","provide","f","val","decorations","s","diagnosticCount","lint","activeMark","lintTooltip","view","side","stackStart","stackEnd","push","min","tooltipFilter","above","dom","diagnosticsTooltip","renderDiagnostic","openLintPanel","dispatch","querySelector","focus","closeLintPanel","nextDiagnostic","sel","selection","main","next","iter","anchor","head","scrollIntoView","previousDiagnostic","prevFrom","prevTo","lastFrom","lastTo","lintKeymap","key","run","preventDefault","lintPlugin","fromClass","timeout","delay","lintTime","Date","now","bind","setTimeout","clearTimeout","sources","batchResults","Promise","resolve","annotations","reduce","a","b","error","config","needsRefresh","promises","sink","collected","p","then","combine","input","Object","assign","i","source","filter","x","u","linter","forceLinting","plugin","force","assignKeys","actions","assigned","name","ch","test","c","toLowerCase","inPanel","_a","keys","renderMessage","message","action","fired","click","apply","keyIndex","indexOf","nameElt","slice","type","onclick","onmousedown","other","PanelItem","id","floor","random","toString","setAttribute","items","onkeydown","event","keyCode","moveSelection","selectedIndex","toUpperCase","charCodeAt","contains","target","list","tabIndex","role","phrase","needsSync","newSelectedItem","_start","_end","item","j","splice","hasAttribute","removeAttribute","pop","requestMeasure","read","getBoundingClientRect","write","scaleY","height","offsetHeight","top","scrollTop","bottom","sync","domPos","firstChild","rm","prev","nextSibling","remove","parentNode","insertBefore","svg","content","attrs","encodeURIComponent","underline","color","baseTheme","padding","marginLeft","display","whiteSpace","borderLeft","font","border","backgroundColor","borderRadius","cursor","fontSize","opacity","backgroundPosition","backgroundRepeat","paddingBottom","backgroundImage","margin","position","left","borderRight","borderBottom","borderBottomColor","maxHeight","overflowY","textDecoration","background_fallback","color_fallback","right","background","severityWeight","sev","LintGutterMarker","document","createElement","className","diagnosticsFilter","lintGutterConfig","onmouseover","gutterMarkerMouseOver","trackHoverOn","marker","mousemove","rect","clientX","clientY","nodeType","classList","window","removeEventListener","lintGutterTooltip","setLintGutterTooltip","addEventListener","hovered","elementAtHeight","documentTop","linePos","coordsAtPos","getCoords","onmouseout","onmousemove","hoverTime","hoverTimeout","markersForDiagnostics","byLine","markers","lintGutterExtension","lintGutterMarkers","widgetMarker","block","empty","t","lintGutterTheme","width","compute","configs","lintGutter","forEachDiagnostic","lState"],"mappings":"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","sourcesContent":["import { Decoration, showPanel, EditorView, ViewPlugin, gutter, showTooltip, hoverTooltip, getPanel, logException, WidgetType, GutterMarker } from '@codemirror/view';\nimport { StateEffect, StateField, Facet, combineConfig, RangeSet } from '@codemirror/state';\nimport elt from 'crelt';\n\nclass SelectedDiagnostic {\n    constructor(from, to, diagnostic) {\n        this.from = from;\n        this.to = to;\n        this.diagnostic = diagnostic;\n    }\n}\nclass LintState {\n    constructor(diagnostics, panel, selected) {\n        this.diagnostics = diagnostics;\n        this.panel = panel;\n        this.selected = selected;\n    }\n    static init(diagnostics, panel, state) {\n        // Filter the list of diagnostics for which to create markers\n        let markedDiagnostics = diagnostics;\n        let diagnosticFilter = state.facet(lintConfig).markerFilter;\n        if (diagnosticFilter)\n            markedDiagnostics = diagnosticFilter(markedDiagnostics, state);\n        let ranges = Decoration.set(markedDiagnostics.map((d) => {\n            // For zero-length ranges or ranges covering only a line break, create a widget\n            return d.from == d.to || (d.from == d.to - 1 && state.doc.lineAt(d.from).to == d.from)\n                ? Decoration.widget({\n                    widget: new DiagnosticWidget(d),\n                    diagnostic: d\n                }).range(d.from)\n                : Decoration.mark({\n                    attributes: { class: \"cm-lintRange cm-lintRange-\" + d.severity + (d.markClass ? \" \" + d.markClass : \"\") },\n                    diagnostic: d\n                }).range(d.from, d.to);\n        }), true);\n        return new LintState(ranges, panel, findDiagnostic(ranges));\n    }\n}\nfunction findDiagnostic(diagnostics, diagnostic = null, after = 0) {\n    let found = null;\n    diagnostics.between(after, 1e9, (from, to, { spec }) => {\n        if (diagnostic && spec.diagnostic != diagnostic)\n            return;\n        found = new SelectedDiagnostic(from, to, spec.diagnostic);\n        return false;\n    });\n    return found;\n}\nfunction hideTooltip(tr, tooltip) {\n    let from = tooltip.pos, to = tooltip.end || from;\n    let result = tr.state.facet(lintConfig).hideOn(tr, from, to);\n    if (result != null)\n        return result;\n    let line = tr.startState.doc.lineAt(tooltip.pos);\n    return !!(tr.effects.some(e => e.is(setDiagnosticsEffect)) || tr.changes.touchesRange(line.from, Math.max(line.to, to)));\n}\nfunction maybeEnableLint(state, effects) {\n    return state.field(lintState, false) ? effects : effects.concat(StateEffect.appendConfig.of(lintExtensions));\n}\n/**\nReturns a transaction spec which updates the current set of\ndiagnostics, and enables the lint extension if if wasn't already\nactive.\n*/\nfunction setDiagnostics(state, diagnostics) {\n    return {\n        effects: maybeEnableLint(state, [setDiagnosticsEffect.of(diagnostics)])\n    };\n}\n/**\nThe state effect that updates the set of active diagnostics. Can\nbe useful when writing an extension that needs to track these.\n*/\nconst setDiagnosticsEffect = /*@__PURE__*/StateEffect.define();\nconst togglePanel = /*@__PURE__*/StateEffect.define();\nconst movePanelSelection = /*@__PURE__*/StateEffect.define();\nconst lintState = /*@__PURE__*/StateField.define({\n    create() {\n        return new LintState(Decoration.none, null, null);\n    },\n    update(value, tr) {\n        if (tr.docChanged && value.diagnostics.size) {\n            let mapped = value.diagnostics.map(tr.changes), selected = null, panel = value.panel;\n            if (value.selected) {\n                let selPos = tr.changes.mapPos(value.selected.from, 1);\n                selected = findDiagnostic(mapped, value.selected.diagnostic, selPos) || findDiagnostic(mapped, null, selPos);\n            }\n            if (!mapped.size && panel && tr.state.facet(lintConfig).autoPanel)\n                panel = null;\n            value = new LintState(mapped, panel, selected);\n        }\n        for (let effect of tr.effects) {\n            if (effect.is(setDiagnosticsEffect)) {\n                let panel = !tr.state.facet(lintConfig).autoPanel ? value.panel : effect.value.length ? LintPanel.open : null;\n                value = LintState.init(effect.value, panel, tr.state);\n            }\n            else if (effect.is(togglePanel)) {\n                value = new LintState(value.diagnostics, effect.value ? LintPanel.open : null, value.selected);\n            }\n            else if (effect.is(movePanelSelection)) {\n                value = new LintState(value.diagnostics, value.panel, effect.value);\n            }\n        }\n        return value;\n    },\n    provide: f => [showPanel.from(f, val => val.panel),\n        EditorView.decorations.from(f, s => s.diagnostics)]\n});\n/**\nReturns the number of active lint diagnostics in the given state.\n*/\nfunction diagnosticCount(state) {\n    let lint = state.field(lintState, false);\n    return lint ? lint.diagnostics.size : 0;\n}\nconst activeMark = /*@__PURE__*/Decoration.mark({ class: \"cm-lintRange cm-lintRange-active\" });\nfunction lintTooltip(view, pos, side) {\n    let { diagnostics } = view.state.field(lintState);\n    let found = [], stackStart = 2e8, stackEnd = 0;\n    diagnostics.between(pos - (side < 0 ? 1 : 0), pos + (side > 0 ? 1 : 0), (from, to, { spec }) => {\n        if (pos >= from && pos <= to &&\n            (from == to || ((pos > from || side > 0) && (pos < to || side < 0)))) {\n            found.push(spec.diagnostic);\n            stackStart = Math.min(from, stackStart);\n            stackEnd = Math.max(to, stackEnd);\n        }\n    });\n    let diagnosticFilter = view.state.facet(lintConfig).tooltipFilter;\n    if (diagnosticFilter)\n        found = diagnosticFilter(found, view.state);\n    if (!found.length)\n        return null;\n    return {\n        pos: stackStart,\n        end: stackEnd,\n        above: view.state.doc.lineAt(stackStart).to < stackEnd,\n        create() {\n            return { dom: diagnosticsTooltip(view, found) };\n        }\n    };\n}\nfunction diagnosticsTooltip(view, diagnostics) {\n    return elt(\"ul\", { class: \"cm-tooltip-lint\" }, diagnostics.map(d => renderDiagnostic(view, d, false)));\n}\n/**\nCommand to open and focus the lint panel.\n*/\nconst openLintPanel = (view) => {\n    let field = view.state.field(lintState, false);\n    if (!field || !field.panel)\n        view.dispatch({ effects: maybeEnableLint(view.state, [togglePanel.of(true)]) });\n    let panel = getPanel(view, LintPanel.open);\n    if (panel)\n        panel.dom.querySelector(\".cm-panel-lint ul\").focus();\n    return true;\n};\n/**\nCommand to close the lint panel, when open.\n*/\nconst closeLintPanel = (view) => {\n    let field = view.state.field(lintState, false);\n    if (!field || !field.panel)\n        return false;\n    view.dispatch({ effects: togglePanel.of(false) });\n    return true;\n};\n/**\nMove the selection to the next diagnostic.\n*/\nconst nextDiagnostic = (view) => {\n    let field = view.state.field(lintState, false);\n    if (!field)\n        return false;\n    let sel = view.state.selection.main, next = field.diagnostics.iter(sel.to + 1);\n    if (!next.value) {\n        next = field.diagnostics.iter(0);\n        if (!next.value || next.from == sel.from && next.to == sel.to)\n            return false;\n    }\n    view.dispatch({ selection: { anchor: next.from, head: next.to }, scrollIntoView: true });\n    return true;\n};\n/**\nMove the selection to the previous diagnostic.\n*/\nconst previousDiagnostic = (view) => {\n    let { state } = view, field = state.field(lintState, false);\n    if (!field)\n        return false;\n    let sel = state.selection.main;\n    let prevFrom, prevTo, lastFrom, lastTo;\n    field.diagnostics.between(0, state.doc.length, (from, to) => {\n        if (to < sel.to && (prevFrom == null || prevFrom < from)) {\n            prevFrom = from;\n            prevTo = to;\n        }\n        if (lastFrom == null || from > lastFrom) {\n            lastFrom = from;\n            lastTo = to;\n        }\n    });\n    if (lastFrom == null || prevFrom == null && lastFrom == sel.from)\n        return false;\n    view.dispatch({ selection: { anchor: prevFrom !== null && prevFrom !== void 0 ? prevFrom : lastFrom, head: prevTo !== null && prevTo !== void 0 ? prevTo : lastTo }, scrollIntoView: true });\n    return true;\n};\n/**\nA set of default key bindings for the lint functionality.\n\n- Ctrl-Shift-m (Cmd-Shift-m on macOS): [`openLintPanel`](https://codemirror.net/6/docs/ref/#lint.openLintPanel)\n- F8: [`nextDiagnostic`](https://codemirror.net/6/docs/ref/#lint.nextDiagnostic)\n*/\nconst lintKeymap = [\n    { key: \"Mod-Shift-m\", run: openLintPanel, preventDefault: true },\n    { key: \"F8\", run: nextDiagnostic }\n];\nconst lintPlugin = /*@__PURE__*/ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.view = view;\n        this.timeout = -1;\n        this.set = true;\n        let { delay } = view.state.facet(lintConfig);\n        this.lintTime = Date.now() + delay;\n        this.run = this.run.bind(this);\n        this.timeout = setTimeout(this.run, delay);\n    }\n    run() {\n        clearTimeout(this.timeout);\n        let now = Date.now();\n        if (now < this.lintTime - 10) {\n            this.timeout = setTimeout(this.run, this.lintTime - now);\n        }\n        else {\n            this.set = false;\n            let { state } = this.view, { sources } = state.facet(lintConfig);\n            if (sources.length)\n                batchResults(sources.map(s => Promise.resolve(s(this.view))), annotations => {\n                    if (this.view.state.doc == state.doc)\n                        this.view.dispatch(setDiagnostics(this.view.state, annotations.reduce((a, b) => a.concat(b))));\n                }, error => { logException(this.view.state, error); });\n        }\n    }\n    update(update) {\n        let config = update.state.facet(lintConfig);\n        if (update.docChanged || config != update.startState.facet(lintConfig) ||\n            config.needsRefresh && config.needsRefresh(update)) {\n            this.lintTime = Date.now() + config.delay;\n            if (!this.set) {\n                this.set = true;\n                this.timeout = setTimeout(this.run, config.delay);\n            }\n        }\n    }\n    force() {\n        if (this.set) {\n            this.lintTime = Date.now();\n            this.run();\n        }\n    }\n    destroy() {\n        clearTimeout(this.timeout);\n    }\n});\nfunction batchResults(promises, sink, error) {\n    let collected = [], timeout = -1;\n    for (let p of promises)\n        p.then(value => {\n            collected.push(value);\n            clearTimeout(timeout);\n            if (collected.length == promises.length)\n                sink(collected);\n            else\n                setTimeout(() => sink(collected), 200);\n        }, error);\n}\nconst lintConfig = /*@__PURE__*/Facet.define({\n    combine(input) {\n        return Object.assign({ sources: input.map(i => i.source).filter(x => x != null) }, combineConfig(input.map(i => i.config), {\n            delay: 750,\n            markerFilter: null,\n            tooltipFilter: null,\n            needsRefresh: null,\n            hideOn: () => null,\n        }, {\n            needsRefresh: (a, b) => !a ? b : !b ? a : u => a(u) || b(u)\n        }));\n    }\n});\n/**\nGiven a diagnostic source, this function returns an extension that\nenables linting with that source. It will be called whenever the\neditor is idle (after its content changed). If `null` is given as\nsource, this only configures the lint extension.\n*/\nfunction linter(source, config = {}) {\n    return [\n        lintConfig.of({ source, config }),\n        lintPlugin,\n        lintExtensions\n    ];\n}\n/**\nForces any linters [configured](https://codemirror.net/6/docs/ref/#lint.linter) to run when the\neditor is idle to run right away.\n*/\nfunction forceLinting(view) {\n    let plugin = view.plugin(lintPlugin);\n    if (plugin)\n        plugin.force();\n}\nfunction assignKeys(actions) {\n    let assigned = [];\n    if (actions)\n        actions: for (let { name } of actions) {\n            for (let i = 0; i < name.length; i++) {\n                let ch = name[i];\n                if (/[a-zA-Z]/.test(ch) && !assigned.some(c => c.toLowerCase() == ch.toLowerCase())) {\n                    assigned.push(ch);\n                    continue actions;\n                }\n            }\n            assigned.push(\"\");\n        }\n    return assigned;\n}\nfunction renderDiagnostic(view, diagnostic, inPanel) {\n    var _a;\n    let keys = inPanel ? assignKeys(diagnostic.actions) : [];\n    return elt(\"li\", { class: \"cm-diagnostic cm-diagnostic-\" + diagnostic.severity }, elt(\"span\", { class: \"cm-diagnosticText\" }, diagnostic.renderMessage ? diagnostic.renderMessage(view) : diagnostic.message), (_a = diagnostic.actions) === null || _a === void 0 ? void 0 : _a.map((action, i) => {\n        let fired = false, click = (e) => {\n            e.preventDefault();\n            if (fired)\n                return;\n            fired = true;\n            let found = findDiagnostic(view.state.field(lintState).diagnostics, diagnostic);\n            if (found)\n                action.apply(view, found.from, found.to);\n        };\n        let { name } = action, keyIndex = keys[i] ? name.indexOf(keys[i]) : -1;\n        let nameElt = keyIndex < 0 ? name : [name.slice(0, keyIndex),\n            elt(\"u\", name.slice(keyIndex, keyIndex + 1)),\n            name.slice(keyIndex + 1)];\n        return elt(\"button\", {\n            type: \"button\",\n            class: \"cm-diagnosticAction\",\n            onclick: click,\n            onmousedown: click,\n            \"aria-label\": ` Action: ${name}${keyIndex < 0 ? \"\" : ` (access key \"${keys[i]})\"`}.`\n        }, nameElt);\n    }), diagnostic.source && elt(\"div\", { class: \"cm-diagnosticSource\" }, diagnostic.source));\n}\nclass DiagnosticWidget extends WidgetType {\n    constructor(diagnostic) {\n        super();\n        this.diagnostic = diagnostic;\n    }\n    eq(other) { return other.diagnostic == this.diagnostic; }\n    toDOM() {\n        return elt(\"span\", { class: \"cm-lintPoint cm-lintPoint-\" + this.diagnostic.severity });\n    }\n}\nclass PanelItem {\n    constructor(view, diagnostic) {\n        this.diagnostic = diagnostic;\n        this.id = \"item_\" + Math.floor(Math.random() * 0xffffffff).toString(16);\n        this.dom = renderDiagnostic(view, diagnostic, true);\n        this.dom.id = this.id;\n        this.dom.setAttribute(\"role\", \"option\");\n    }\n}\nclass LintPanel {\n    constructor(view) {\n        this.view = view;\n        this.items = [];\n        let onkeydown = (event) => {\n            if (event.keyCode == 27) { // Escape\n                closeLintPanel(this.view);\n                this.view.focus();\n            }\n            else if (event.keyCode == 38 || event.keyCode == 33) { // ArrowUp, PageUp\n                this.moveSelection((this.selectedIndex - 1 + this.items.length) % this.items.length);\n            }\n            else if (event.keyCode == 40 || event.keyCode == 34) { // ArrowDown, PageDown\n                this.moveSelection((this.selectedIndex + 1) % this.items.length);\n            }\n            else if (event.keyCode == 36) { // Home\n                this.moveSelection(0);\n            }\n            else if (event.keyCode == 35) { // End\n                this.moveSelection(this.items.length - 1);\n            }\n            else if (event.keyCode == 13) { // Enter\n                this.view.focus();\n            }\n            else if (event.keyCode >= 65 && event.keyCode <= 90 && this.selectedIndex >= 0) { // A-Z\n                let { diagnostic } = this.items[this.selectedIndex], keys = assignKeys(diagnostic.actions);\n                for (let i = 0; i < keys.length; i++)\n                    if (keys[i].toUpperCase().charCodeAt(0) == event.keyCode) {\n                        let found = findDiagnostic(this.view.state.field(lintState).diagnostics, diagnostic);\n                        if (found)\n                            diagnostic.actions[i].apply(view, found.from, found.to);\n                    }\n            }\n            else {\n                return;\n            }\n            event.preventDefault();\n        };\n        let onclick = (event) => {\n            for (let i = 0; i < this.items.length; i++) {\n                if (this.items[i].dom.contains(event.target))\n                    this.moveSelection(i);\n            }\n        };\n        this.list = elt(\"ul\", {\n            tabIndex: 0,\n            role: \"listbox\",\n            \"aria-label\": this.view.state.phrase(\"Diagnostics\"),\n            onkeydown,\n            onclick\n        });\n        this.dom = elt(\"div\", { class: \"cm-panel-lint\" }, this.list, elt(\"button\", {\n            type: \"button\",\n            name: \"close\",\n            \"aria-label\": this.view.state.phrase(\"close\"),\n            onclick: () => closeLintPanel(this.view)\n        }, \"×\"));\n        this.update();\n    }\n    get selectedIndex() {\n        let selected = this.view.state.field(lintState).selected;\n        if (!selected)\n            return -1;\n        for (let i = 0; i < this.items.length; i++)\n            if (this.items[i].diagnostic == selected.diagnostic)\n                return i;\n        return -1;\n    }\n    update() {\n        let { diagnostics, selected } = this.view.state.field(lintState);\n        let i = 0, needsSync = false, newSelectedItem = null;\n        diagnostics.between(0, this.view.state.doc.length, (_start, _end, { spec }) => {\n            let found = -1, item;\n            for (let j = i; j < this.items.length; j++)\n                if (this.items[j].diagnostic == spec.diagnostic) {\n                    found = j;\n                    break;\n                }\n            if (found < 0) {\n                item = new PanelItem(this.view, spec.diagnostic);\n                this.items.splice(i, 0, item);\n                needsSync = true;\n            }\n            else {\n                item = this.items[found];\n                if (found > i) {\n                    this.items.splice(i, found - i);\n                    needsSync = true;\n                }\n            }\n            if (selected && item.diagnostic == selected.diagnostic) {\n                if (!item.dom.hasAttribute(\"aria-selected\")) {\n                    item.dom.setAttribute(\"aria-selected\", \"true\");\n                    newSelectedItem = item;\n                }\n            }\n            else if (item.dom.hasAttribute(\"aria-selected\")) {\n                item.dom.removeAttribute(\"aria-selected\");\n            }\n            i++;\n        });\n        while (i < this.items.length && !(this.items.length == 1 && this.items[0].diagnostic.from < 0)) {\n            needsSync = true;\n            this.items.pop();\n        }\n        if (this.items.length == 0) {\n            this.items.push(new PanelItem(this.view, {\n                from: -1, to: -1,\n                severity: \"info\",\n                message: this.view.state.phrase(\"No diagnostics\")\n            }));\n            needsSync = true;\n        }\n        if (newSelectedItem) {\n            this.list.setAttribute(\"aria-activedescendant\", newSelectedItem.id);\n            this.view.requestMeasure({\n                key: this,\n                read: () => ({ sel: newSelectedItem.dom.getBoundingClientRect(), panel: this.list.getBoundingClientRect() }),\n                write: ({ sel, panel }) => {\n                    let scaleY = panel.height / this.list.offsetHeight;\n                    if (sel.top < panel.top)\n                        this.list.scrollTop -= (panel.top - sel.top) / scaleY;\n                    else if (sel.bottom > panel.bottom)\n                        this.list.scrollTop += (sel.bottom - panel.bottom) / scaleY;\n                }\n            });\n        }\n        else if (this.selectedIndex < 0) {\n            this.list.removeAttribute(\"aria-activedescendant\");\n        }\n        if (needsSync)\n            this.sync();\n    }\n    sync() {\n        let domPos = this.list.firstChild;\n        function rm() {\n            let prev = domPos;\n            domPos = prev.nextSibling;\n            prev.remove();\n        }\n        for (let item of this.items) {\n            if (item.dom.parentNode == this.list) {\n                while (domPos != item.dom)\n                    rm();\n                domPos = item.dom.nextSibling;\n            }\n            else {\n                this.list.insertBefore(item.dom, domPos);\n            }\n        }\n        while (domPos)\n            rm();\n    }\n    moveSelection(selectedIndex) {\n        if (this.selectedIndex < 0)\n            return;\n        let field = this.view.state.field(lintState);\n        let selection = findDiagnostic(field.diagnostics, this.items[selectedIndex].diagnostic);\n        if (!selection)\n            return;\n        this.view.dispatch({\n            selection: { anchor: selection.from, head: selection.to },\n            scrollIntoView: true,\n            effects: movePanelSelection.of(selection)\n        });\n    }\n    static open(view) { return new LintPanel(view); }\n}\nfunction svg(content, attrs = `viewBox=\"0 0 40 40\"`) {\n    return `url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" ${attrs}>${encodeURIComponent(content)}</svg>')`;\n}\nfunction underline(color) {\n    return svg(`<path d=\"m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0\" stroke=\"${color}\" fill=\"none\" stroke-width=\".7\"/>`, `width=\"6\" height=\"3\"`);\n}\nconst baseTheme = /*@__PURE__*/EditorView.baseTheme({\n    \".cm-diagnostic\": {\n        padding: \"3px 6px 3px 8px\",\n        marginLeft: \"-1px\",\n        display: \"block\",\n        whiteSpace: \"pre-wrap\"\n    },\n    \".cm-diagnostic-error\": { borderLeft: \"5px solid #d11\" },\n    \".cm-diagnostic-warning\": { borderLeft: \"5px solid orange\" },\n    \".cm-diagnostic-info\": { borderLeft: \"5px solid #999\" },\n    \".cm-diagnostic-hint\": { borderLeft: \"5px solid #66d\" },\n    \".cm-diagnosticAction\": {\n        font: \"inherit\",\n        border: \"none\",\n        padding: \"2px 4px\",\n        backgroundColor: \"#444\",\n        color: \"white\",\n        borderRadius: \"3px\",\n        marginLeft: \"8px\",\n        cursor: \"pointer\"\n    },\n    \".cm-diagnosticSource\": {\n        fontSize: \"70%\",\n        opacity: .7\n    },\n    \".cm-lintRange\": {\n        backgroundPosition: \"left bottom\",\n        backgroundRepeat: \"repeat-x\",\n        paddingBottom: \"0.7px\",\n    },\n    \".cm-lintRange-error\": { backgroundImage: /*@__PURE__*/underline(\"#d11\") },\n    \".cm-lintRange-warning\": { backgroundImage: /*@__PURE__*/underline(\"orange\") },\n    \".cm-lintRange-info\": { backgroundImage: /*@__PURE__*/underline(\"#999\") },\n    \".cm-lintRange-hint\": { backgroundImage: /*@__PURE__*/underline(\"#66d\") },\n    \".cm-lintRange-active\": { backgroundColor: \"#ffdd9980\" },\n    \".cm-tooltip-lint\": {\n        padding: 0,\n        margin: 0\n    },\n    \".cm-lintPoint\": {\n        position: \"relative\",\n        \"&:after\": {\n            content: '\"\"',\n            position: \"absolute\",\n            bottom: 0,\n            left: \"-2px\",\n            borderLeft: \"3px solid transparent\",\n            borderRight: \"3px solid transparent\",\n            borderBottom: \"4px solid #d11\"\n        }\n    },\n    \".cm-lintPoint-warning\": {\n        \"&:after\": { borderBottomColor: \"orange\" }\n    },\n    \".cm-lintPoint-info\": {\n        \"&:after\": { borderBottomColor: \"#999\" }\n    },\n    \".cm-lintPoint-hint\": {\n        \"&:after\": { borderBottomColor: \"#66d\" }\n    },\n    \".cm-panel.cm-panel-lint\": {\n        position: \"relative\",\n        \"& ul\": {\n            maxHeight: \"100px\",\n            overflowY: \"auto\",\n            \"& [aria-selected]\": {\n                backgroundColor: \"#ddd\",\n                \"& u\": { textDecoration: \"underline\" }\n            },\n            \"&:focus [aria-selected]\": {\n                background_fallback: \"#bdf\",\n                backgroundColor: \"Highlight\",\n                color_fallback: \"white\",\n                color: \"HighlightText\"\n            },\n            \"& u\": { textDecoration: \"none\" },\n            padding: 0,\n            margin: 0\n        },\n        \"& [name=close]\": {\n            position: \"absolute\",\n            top: \"0\",\n            right: \"2px\",\n            background: \"inherit\",\n            border: \"none\",\n            font: \"inherit\",\n            padding: 0,\n            margin: 0\n        }\n    }\n});\nfunction severityWeight(sev) {\n    return sev == \"error\" ? 4 : sev == \"warning\" ? 3 : sev == \"info\" ? 2 : 1;\n}\nclass LintGutterMarker extends GutterMarker {\n    constructor(diagnostics) {\n        super();\n        this.diagnostics = diagnostics;\n        this.severity = diagnostics.reduce((max, d) => severityWeight(max) < severityWeight(d.severity) ? d.severity : max, \"hint\");\n    }\n    toDOM(view) {\n        let elt = document.createElement(\"div\");\n        elt.className = \"cm-lint-marker cm-lint-marker-\" + this.severity;\n        let diagnostics = this.diagnostics;\n        let diagnosticsFilter = view.state.facet(lintGutterConfig).tooltipFilter;\n        if (diagnosticsFilter)\n            diagnostics = diagnosticsFilter(diagnostics, view.state);\n        if (diagnostics.length)\n            elt.onmouseover = () => gutterMarkerMouseOver(view, elt, diagnostics);\n        return elt;\n    }\n}\nfunction trackHoverOn(view, marker) {\n    let mousemove = (event) => {\n        let rect = marker.getBoundingClientRect();\n        if (event.clientX > rect.left - 10 /* Hover.Margin */ && event.clientX < rect.right + 10 /* Hover.Margin */ &&\n            event.clientY > rect.top - 10 /* Hover.Margin */ && event.clientY < rect.bottom + 10 /* Hover.Margin */)\n            return;\n        for (let target = event.target; target; target = target.parentNode) {\n            if (target.nodeType == 1 && target.classList.contains(\"cm-tooltip-lint\"))\n                return;\n        }\n        window.removeEventListener(\"mousemove\", mousemove);\n        if (view.state.field(lintGutterTooltip))\n            view.dispatch({ effects: setLintGutterTooltip.of(null) });\n    };\n    window.addEventListener(\"mousemove\", mousemove);\n}\nfunction gutterMarkerMouseOver(view, marker, diagnostics) {\n    function hovered() {\n        let line = view.elementAtHeight(marker.getBoundingClientRect().top + 5 - view.documentTop);\n        const linePos = view.coordsAtPos(line.from);\n        if (linePos) {\n            view.dispatch({ effects: setLintGutterTooltip.of({\n                    pos: line.from,\n                    above: false,\n                    create() {\n                        return {\n                            dom: diagnosticsTooltip(view, diagnostics),\n                            getCoords: () => marker.getBoundingClientRect()\n                        };\n                    }\n                }) });\n        }\n        marker.onmouseout = marker.onmousemove = null;\n        trackHoverOn(view, marker);\n    }\n    let { hoverTime } = view.state.facet(lintGutterConfig);\n    let hoverTimeout = setTimeout(hovered, hoverTime);\n    marker.onmouseout = () => {\n        clearTimeout(hoverTimeout);\n        marker.onmouseout = marker.onmousemove = null;\n    };\n    marker.onmousemove = () => {\n        clearTimeout(hoverTimeout);\n        hoverTimeout = setTimeout(hovered, hoverTime);\n    };\n}\nfunction markersForDiagnostics(doc, diagnostics) {\n    let byLine = Object.create(null);\n    for (let diagnostic of diagnostics) {\n        let line = doc.lineAt(diagnostic.from);\n        (byLine[line.from] || (byLine[line.from] = [])).push(diagnostic);\n    }\n    let markers = [];\n    for (let line in byLine) {\n        markers.push(new LintGutterMarker(byLine[line]).range(+line));\n    }\n    return RangeSet.of(markers, true);\n}\nconst lintGutterExtension = /*@__PURE__*/gutter({\n    class: \"cm-gutter-lint\",\n    markers: view => view.state.field(lintGutterMarkers),\n    widgetMarker: (view, widget, block) => {\n        let diagnostics = [];\n        view.state.field(lintGutterMarkers).between(block.from, block.to, (from, to, value) => {\n            diagnostics.push(...value.diagnostics);\n        });\n        return diagnostics.length ? new LintGutterMarker(diagnostics) : null;\n    }\n});\nconst lintGutterMarkers = /*@__PURE__*/StateField.define({\n    create() {\n        return RangeSet.empty;\n    },\n    update(markers, tr) {\n        markers = markers.map(tr.changes);\n        let diagnosticFilter = tr.state.facet(lintGutterConfig).markerFilter;\n        for (let effect of tr.effects) {\n            if (effect.is(setDiagnosticsEffect)) {\n                let diagnostics = effect.value;\n                if (diagnosticFilter)\n                    diagnostics = diagnosticFilter(diagnostics || [], tr.state);\n                markers = markersForDiagnostics(tr.state.doc, diagnostics.slice(0));\n            }\n        }\n        return markers;\n    }\n});\nconst setLintGutterTooltip = /*@__PURE__*/StateEffect.define();\nconst lintGutterTooltip = /*@__PURE__*/StateField.define({\n    create() { return null; },\n    update(tooltip, tr) {\n        if (tooltip && tr.docChanged)\n            tooltip = hideTooltip(tr, tooltip) ? null : Object.assign(Object.assign({}, tooltip), { pos: tr.changes.mapPos(tooltip.pos) });\n        return tr.effects.reduce((t, e) => e.is(setLintGutterTooltip) ? e.value : t, tooltip);\n    },\n    provide: field => showTooltip.from(field)\n});\nconst lintGutterTheme = /*@__PURE__*/EditorView.baseTheme({\n    \".cm-gutter-lint\": {\n        width: \"1.4em\",\n        \"& .cm-gutterElement\": {\n            padding: \".2em\"\n        }\n    },\n    \".cm-lint-marker\": {\n        width: \"1em\",\n        height: \"1em\"\n    },\n    \".cm-lint-marker-info\": {\n        content: /*@__PURE__*/svg(`<path fill=\"#aaf\" stroke=\"#77e\" stroke-width=\"6\" stroke-linejoin=\"round\" d=\"M5 5L35 5L35 35L5 35Z\"/>`)\n    },\n    \".cm-lint-marker-warning\": {\n        content: /*@__PURE__*/svg(`<path fill=\"#fe8\" stroke=\"#fd7\" stroke-width=\"6\" stroke-linejoin=\"round\" d=\"M20 6L37 35L3 35Z\"/>`),\n    },\n    \".cm-lint-marker-error\": {\n        content: /*@__PURE__*/svg(`<circle cx=\"20\" cy=\"20\" r=\"15\" fill=\"#f87\" stroke=\"#f43\" stroke-width=\"6\"/>`)\n    },\n});\nconst lintExtensions = [\n    lintState,\n    /*@__PURE__*/EditorView.decorations.compute([lintState], state => {\n        let { selected, panel } = state.field(lintState);\n        return !selected || !panel || selected.from == selected.to ? Decoration.none : Decoration.set([\n            activeMark.range(selected.from, selected.to)\n        ]);\n    }),\n    /*@__PURE__*/hoverTooltip(lintTooltip, { hideOn: hideTooltip }),\n    baseTheme\n];\nconst lintGutterConfig = /*@__PURE__*/Facet.define({\n    combine(configs) {\n        return combineConfig(configs, {\n            hoverTime: 300 /* Hover.Time */,\n            markerFilter: null,\n            tooltipFilter: null\n        });\n    }\n});\n/**\nReturns an extension that installs a gutter showing markers for\neach line that has diagnostics, which can be hovered over to see\nthe diagnostics.\n*/\nfunction lintGutter(config = {}) {\n    return [lintGutterConfig.of(config), lintGutterMarkers, lintGutterExtension, lintGutterTheme, lintGutterTooltip];\n}\n/**\nIterate over the marked diagnostics for the given editor state,\ncalling `f` for each of them. Note that, if the document changed\nsince the diagnostics were created, the `Diagnostic` object will\nhold the original outdated position, whereas the `to` and `from`\narguments hold the diagnostic's current position.\n*/\nfunction forEachDiagnostic(state, f) {\n    let lState = state.field(lintState, false);\n    if (lState && lState.diagnostics.size)\n        for (let iter = RangeSet.iter([lState.diagnostics]); iter.value; iter.next())\n            f(iter.value.spec.diagnostic, iter.from, iter.to);\n}\n\nexport { closeLintPanel, diagnosticCount, forEachDiagnostic, forceLinting, lintGutter, lintKeymap, linter, nextDiagnostic, openLintPanel, previousDiagnostic, setDiagnostics, setDiagnosticsEffect };\n"]},"metadata":{},"sourceType":"module"}